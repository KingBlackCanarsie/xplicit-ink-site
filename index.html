<script>
  // === Improved Smooth Auto-Scroll Up with Pause/Resume ===

  let rafId = null;
  let isUserInteracting = false;
  let pauseTimer = null;

  const SCROLL_SPEED = 1.2;           // pixels per frame — adjust higher for faster (1.5–2), lower for slower (0.6–0.8)
  const RESUME_AFTER_PAUSE_MS = 5000; // resume after 5 seconds of inactivity

  function autoScrollStep() {
    if (isUserInteracting) {
      rafId = null;
      return;
    }

    const currentY = window.scrollY;
    if (currentY <= 5) {
      rafId = null;
      return;
    }

    window.scrollBy(0, -SCROLL_SPEED);
    rafId = requestAnimationFrame(autoScrollStep);
  }

  function startAutoScroll() {
    if (rafId) return;
    rafId = requestAnimationFrame(autoScrollStep);
  }

  function stopAutoScroll() {
    if (rafId) {
      cancelAnimationFrame(rafId);
      rafId = null;
    }
  }

  function resetPauseTimer() {
    clearTimeout(pauseTimer);
    pauseTimer = setTimeout(() => {
      if (!isUserInteracting) {
        startAutoScroll();
      }
    }, RESUME_AFTER_PAUSE_MS);
  }

  // Detect any user control → pause
  function handleUserInteraction() {
    isUserInteracting = true;
    stopAutoScroll();
    resetPauseTimer();
    console.log("User interacted — auto-scroll paused");
  }

  // Listeners for interaction
  window.addEventListener('scroll', handleUserInteraction, { passive: true });
  window.addEventListener('wheel', handleUserInteraction, { passive: true });
  window.addEventListener('touchstart', handleUserInteraction, { passive: true });
  window.addEventListener('mousedown', handleUserInteraction);
  window.addEventListener('keydown', handleUserInteraction);

  // Start after load + slight delay
  window.addEventListener('load', () => {
    setTimeout(() => {
      if (window.scrollY > 5 && !isUserInteracting) {
        // Optional: force a tiny downward scroll first to make upward motion obvious
        window.scrollBy(0, 300);
        setTimeout(startAutoScroll, 800); // start upward after brief down
        console.log("Auto-scroll started");
      }
    }, 2000); // 2-second delay after load
  });

  // If scrolled to top manually, disable permanently
  window.addEventListener('scroll', () => {
    if (window.scrollY <= 5) {
      stopAutoScroll();
      isUserInteracting = true;
      console.log("At top — auto-scroll disabled");
    }
  });
</script>
